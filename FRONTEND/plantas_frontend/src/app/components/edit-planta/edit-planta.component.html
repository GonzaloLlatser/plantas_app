<div class="container-fluid inicio-background flex ">
  <h1 class="titulo">Â¿Hacemos unos cambios? </h1>
  <div class="container mt-3">
    <!-- Formulario-->
    <div class="col-md-6 float-end formularioCSS_clase">
      <form [formGroup]="formPlanta" (ngSubmit)="modificar()">
        <!-- Campo Nombre-->
        <div class="form-floating mt-3">
          <input
            type="text"
            formControlName="nombre"
            class="form-control"
            id="nombre"
            placeholder="Nombre de tu planta">
          <label for="nombre">ğŸŒ¿ Nombre: Dale un apodo con personalidad</label>
          <!--ValidaciÃ³n-->
          @if (nombre.invalid && (nombre.dirty || nombre.touched)) {
            <!-- Alerta para 'required' -->
            @if (nombre.errors?.['required']) {
              <div class="alert alert-danger" role="alert">
                Â¡Ey! No te olvides de ponerle un nombre a tu planta
              </div>
            }
            <!-- Alerta para 'maxLength' -->
            @if (nombre.errors?.['maxlength']) {
              <div class="alert alert-warning" role="alert">
                Ups... Â¡Ese nombre es muy largo! Â¿PodÃ©s resumirlo un poquito?
              </div>
            }
            <!-- Alerta para 'minLength' -->
            @if (nombre.errors?.['minlength']) {
              <div class="alert alert-warning" role="alert">
                Â¿Solo eso? Dale un nombre un poquito mÃ¡s completo.
              </div>
            }
            <!-- Alerta para '@nombre' -->
            @if (nombre.errors?.['nombre']) {
              <div class="alert alert-warning" role="alert">
                Hmm... ese nombre no parece vÃ¡lido. Â¿QuerÃ©s revisarlo?
              </div>
            }
            <!-- Alerta para 'notOnlyWhiteSpace' -->
            @if (nombre.errors?.['notOnlyWhiteSpace']) {
              <div class="alert alert-danger" role="alert">
                Â¡Cuidado! No podÃ©s dejar solo espacios en blanco.
              </div>
            }
          }
        </div>
        <!-- Campo fechaAdquisicion-->
        <div class="form-floating mt-3">
          <input
            type="text"
            class="form-control"
            id="fechaAdquisicion"
            placeholder="Fecha en que llegÃ³ a tu vida"
            ngbDatepicker
            formControlName="fechaAdquisicion"
            #dpAdquisicion="ngbDatepicker"
            (click)="dpAdquisicion.toggle()">
          <label for="fechaAdquisicion">ğŸ“… Fecha de adopciÃ³n: Â¿CuÃ¡ndo te conquistÃ³?</label>
          <!-- ValidaciÃ³n-->
          @if (fechaAdquisicionFormulario.invalid && (fechaAdquisicionFormulario.dirty || fechaAdquisicionFormulario.touched)) {
            <!-- Alerta para 'required' -->
            @if (fechaAdquisicionFormulario.errors?.['required']) {
              <div class="alert alert-danger" role="alert">
                Â¿CuÃ¡ndo adoptaste esta planta? No nos dejes con la duda.
              </div>
            }
          }
        </div>
        <!-- Campo fechaUltimoRiego-->
        <div class="form-floating mt-3">
          <input
            type="text"
            class="form-control"
            id="fechaUltimoRiego"
            placeholder="Ãšltima vez que la regaste"
            ngbDatepicker
            formControlName="fechaUltimoRiego"
            #dpUltimoRiego="ngbDatepicker"
            (click)="dpUltimoRiego.toggle()">
          <label for="fechaUltimoRiego">ğŸ’§ Ãšltimo riego: Â¡Ya es hora de hidratarla o ya fue?</label>
          <!-- ValidaciÃ³n-->
          @if (fechaUltimoRiego.invalid && (fechaUltimoRiego.dirty || fechaUltimoRiego.touched)) {
            <!-- Alerta para 'required' -->
            @if (fechaUltimoRiego.errors?.['required']) {
              <div class="alert alert-danger" role="alert">
                Â¿CuÃ¡ndo fue la Ãºltima vez que la regaste? Â¡A tu plantita le importa!
              </div>
            }
          }
        </div>
        <!-- Campo fechaPoda-->
        <div class="form-floating mt-3">
          <input
            type="text"
            class="form-control"
            id="fechaPoda"
            placeholder="Ãšltima poda"
            ngbDatepicker
            formControlName="fechaPoda"
            #dpPoda="ngbDatepicker"
            (click)="dpPoda.toggle()">
          <label for="fechaPoda">âœ‚ï¸ Ãšltima poda: Â¿Ya pasÃ³ por la peluquerÃ­a?</label>
          <!-- ValidaciÃ³n-->
          @if (fechaPoda.invalid && (fechaPoda.dirty || fechaPoda.touched)) {
            <!-- Alerta para 'required' -->
            @if (fechaPoda.errors?.['required']) {
              <div class="alert alert-danger" role="alert">
                Â¿CuÃ¡ndo fue su Ãºltimo corte de look? Â¡Las plantas tambiÃ©n van a la pelu!
              </div>
            }
          }
        </div>
        <!-- Campo fechaProximoRiego-->
        <div class="form-floating mt-3">
          <input
            type="text"
            class="form-control"
            id="fechaProximoRiego"
            placeholder="PrÃ³ximo riego"
            ngbDatepicker
            formControlName="fechaProximoRiego"
            #dpProximoRiego="ngbDatepicker"
            (click)="dpProximoRiego.toggle()">
          <label for="fechaProximoRiego">ğŸ—“ï¸ PrÃ³ximo riego: Agendalo para que no se te pase</label>
          <!-- ValidaciÃ³n-->
          @if (fechaProximoRiego.invalid && (fechaProximoRiego.dirty || fechaProximoRiego.touched)) {
            <!-- Alerta para 'required' -->
            @if (fechaProximoRiego.errors?.['required']) {
              <div class="alert alert-danger" role="alert">
                Â¿CuÃ¡ndo pensÃ¡s regarla de nuevo? AsÃ­ no se te seca.
              </div>
            }
          }
        </div>
        <!-- Campo ubicacion-->
        <div class="form-floating mt-3">
          <input
            type="text"
            formControlName="ubicacion"
            class="form-control"
            id="ubicacion"
            placeholder="Ej: BalcÃ³n, Cocina, Estudio...">
          <label for="ubicacion">ğŸ“ UbicaciÃ³n: Â¿DÃ³nde vive tu plantita?</label>
          <!--ValidaciÃ³n-->
          @if (ubicacion.invalid && (ubicacion.dirty || ubicacion.touched)) {
            <!-- Alerta para 'required' -->
            @if (ubicacion.errors?.['required']) {
              <div class="alert alert-danger" role="alert">
                Â¿DÃ³nde estÃ¡ tu planta? No podemos dejarla perdida.
              </div>
            }
            <!-- Alerta para 'maxLength' -->
            @if (ubicacion.errors?.['maxlength']) {
              <div class="alert alert-warning" role="alert">
                Â¡Esa ubicaciÃ³n es larguÃ­sima! Â¿PodÃ©s acortarla?
              </div>
            }
            <!-- Alerta para 'minLength' -->
            @if (ubicacion.errors?.['minlength']) {
              <div class="alert alert-warning" role="alert">
                Â¿Tan corta? Prueba escribirla poco mÃ¡s.
              </div>
            }
            <!-- Alerta para '@ubicacion' -->
            @if (ubicacion.errors?.['ubicacion']) {
              <div class="alert alert-warning" role="alert">
                Hmm... esa ubicaciÃ³n no se entiende muy bien.
              </div>
            }
            <!-- Alerta para 'notOnlyWhiteSpace' -->
            @if (ubicacion.errors?.['notOnlyWhiteSpace']) {
              <div class="alert alert-danger" role="alert">
                Â¡Cuidado! Eso no es una ubicaciÃ³n vÃ¡lida.
              </div>
            }
          }
        </div>
        <!-- Campo tipoPlanta-->
        <div class="form-floating mt-3">
          <input
            type="text"
            formControlName="tipoPlanta"
            class="form-control"
            id="tipoPlanta"
            placeholder="Ej: Cactus, Suculenta, Ficus...">
          <label for="tipoPlanta">ğŸŒµ Tipo: Â¿De quÃ© especie es tu compaÃ±era verde?</label>
          <!--ValidaciÃ³n-->
          @if (tipoPlanta.invalid && (tipoPlanta.dirty || tipoPlanta.touched)) {
            <!-- Alerta para 'required' -->
            @if (tipoPlanta.errors?.['required']) {
              <div class="alert alert-danger" role="alert">
                Â¿QuÃ© tipo de planta es? Â¡CuÃ©ntanos!
              </div>
            }
            <!-- Alerta para 'maxLength' -->
            @if (tipoPlanta.errors?.['maxlength']) {
              <div class="alert alert-warning" role="alert">
                Â¡Wow! Ese nombre de planta es demasiado largo.
              </div>
            }
            <!-- Alerta para 'minLength' -->
            @if (tipoPlanta.errors?.['minlength']) {
              <div class="alert alert-warning" role="alert">
                Â¿Puedes ser un poco mÃ¡s descriptivo?
              </div>
            }
            <!-- Alerta para '@nombre' -->
            @if (tipoPlanta.errors?.['tipoPlanta']) {
              <div class="alert alert-warning" role="alert">
                No estamos seguros a que planta te refieres. Â¿Lo revisÃ¡s?
              </div>
            }
            <!-- Alerta para 'notOnlyWhiteSpace' -->
            @if (tipoPlanta.errors?.['notOnlyWhiteSpace']) {
              <div class="alert alert-danger" role="alert">
                Parece que solo pusiste espacios. EscribÃ­ algo real.
              </div>
            }
          }
        </div>
        <!-- Input para imagen -->
        <div class="form-floating mt-3">
          <input
            type="file" (change)="onFileChange($event)"
            placeholder="Alguna foto bonita"
            class="form-control"
          >
          <label for="notas">ğŸ“· Foto: Una imagÃ©n sonriente de tu planta</label>
        </div>
        <!-- Campo notas-->
        <div class="form-floating mt-3">
          <input
            type="text"
            formControlName="notas"
            class="form-control"
            id="notas"
            placeholder="Algo que quieras recordar">
          <label for="notas">ğŸ“ Notas: Secretos, tips o lo que se te ocurra</label>
          <!--ValidaciÃ³n-->
          @if (notas.invalid && (notas.dirty || notas.touched)) {
            <!-- Alerta para 'required' -->
            @if (notas.errors?.['required']) {
              <div class="alert alert-danger" role="alert">
                Â¿Debes dejar alguna nota? Â¡No seas tÃ­mido!
              </div>
            }
            <!-- Alerta para 'maxLength' -->
            @if (notas.errors?.['maxlength']) {
              <div class="alert alert-warning" role="alert">
                Â¡Te copaste escribiendo! TratÃ¡ de resumirlo un poco.
              </div>
            }
            <!-- Alerta para 'minLength' -->
            @if (notas.errors?.['minlength']) {
              <div class="alert alert-warning" role="alert">
                Eso es muy cortito. Danos un poco mÃ¡s de info.
              </div>
            }
            <!-- Alerta para '@notas' -->
            @if (notas.errors?.['notas']) {
              <div class="alert alert-warning" role="alert">
                No entendemos bien esa nota. Â¿Quieres revisarla?
              </div>
            }
            <!-- Alerta para 'notOnlyWhiteSpace' -->
            @if (notas.errors?.['notOnlyWhiteSpace']) {
              <div class="alert alert-danger" role="alert">
                Â¡Ups! Solo hay espacios. Â¿Puedes escribir algo?
              </div>
            }
          }
        </div>
        <!-- BotÃ³nes -->
        <div class="mt-3">
          <button type="submit" class="btn btn-m btn-success">Guardar</button>
          <button type="button" class="btn btn-m float-end btn-danger" data-bs-toggle="modal"
                  data-bs-target="#eliminarPlantaModal">
            Eliminar
          </button>
          <button type="button" class="btn btn-secondary float-end" (click)="volverInicio()">Â¿Luego? VOLVER</button>
        </div>
      </form>
      <!-- Fin del Formulario -->
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" [attr.id]="'eliminarPlantaModal'"
       tabindex="-1"
       aria-labelledby="deleteModalLabel">
    <div class="modal-dialog ">
      <div class="modal-content modalEstilos shadow-lg border-0 rounded-4">
        <div class="modal-header bg-danger bg-gradient text-white rounded-top">
          <h1 class="modal-title fs-4 fw-bold">
            âš ï¸ Â¡Cuidado! Esta acciÃ³n eliminarÃ¡ tu planta permanentemente
          </h1>
        </div>
        <div class="modal-body text-center">
          <p class="fs-5 text-dark-emphasis">
            Â¿EstÃ¡s seguro? <br>
          </p>
          <h6 class="text-danger fw-semibold mt-3">
            Si deseas continuar, haz click en <span class="text-decoration-underline">Aceptar</span>.
          </h6>
        </div>
        <div class="modal-footer d-flex justify-content-between bg-light rounded-bottom">
          <button type="button" class="btn btn-outline-secondary px-4" data-bs-dismiss="modal">
            âŒ Cancelar
          </button>
          <button type="button" class="btn btn-danger px-4" data-bs-dismiss="modal" (click)="eliminarPlanta()">
            ğŸ—‘ï¸ Aceptar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast centrado y dinÃ¡mico -->
  <div class="toast-container position-fixed top-50 start-50 translate-middle p-3" *ngIf="mostrarToast">
    <div class="toast align-items-center border-0 show" [ngClass]="colorToast" role="alert">
      <div class="d-flex">
        <div class="toast-body">
          {{ iconoToast }} {{ mensajeToast }}
        </div>
      </div>
    </div>
  </div>
</div>

